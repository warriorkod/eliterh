<app-loading-screen *ngIf="loading"></app-loading-screen>
<ng-container *ngIf="!loading">
  <app-header></app-header>
  <!-- Job Single Content Starts -->
  <section class="job-single-content section-padding-profil">
    <div class="container">
      <div class="row">
        <div class="col-lg-4">
          <div class="sidebar">
            <div class="single-item mb-4">
              <ul class="mt-4">
                <li class="mb-3"><h3><i class="fa fa-user"></i> {{user.prenom }} {{user.nom }}</h3></li>
                <li class="mb-3"><h5><i class="fa fa-envelope"></i> {{user.email }} </h5></li>
                <li><h5><i class="fa fa-phone"></i> {{user.tel }}  </h5></li>
                <li><h5><i class="fa fa-birthday-cake"></i> {{user.dateNaissance }}  </h5></li>
              </ul>
              <div class="job-btn align-self-center pt-5">
                <a (click)="updateProfil()" class="forth-btn">Modifier votre profil</a>
              </div>

              <div class="job-btn align-self-center pt-5">
                <a (click)="fireUpdatePassword()" class="forth-btn">Modifier votre mot de passe</a>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-8">
          <div class="main-content">
            <div class="single-content1">
              <div class="single-job mb-4 d-lg-flex justify-content-between">
                <div class="job-text">
                  <h1>Informations générales</h1>
                  <ul class="mt-5">
                    <li class="mb-4"><h5><strong>Adrese</strong> : {{user.adresse}}</h5></li>
                    <li class="mb-4"><h5><strong>Région</strong> : {{user.lieu}}</h5></li>
                    <li><h5><strong>Civilité</strong> : {{user.civilite}}</h5></li>
                  </ul>
                  <ul class="mt-5">
                    <li class="mb-4"><h5><strong>Niveau d'étude </strong> : {{user.etudeLevel}}</h5></li>
                    <li class="mb-4"><h5><strong>Niveau d'expérience</strong> : {{user.experienceLevel}}</h5></li>
                    <li class="mb-4"><h5><strong>Domaine actuel </strong> : {{user.actualDomain}}</h5></li>
                    <li class="mb-4"><h5><strong>Domaine recherché</strong> : {{user.searchDomain}}</h5></li>
                  </ul>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- Job Single Content End -->
  <app-footer></app-footer>
</ng-container>

<swal #subscribe [showConfirmButton]=false icon="info" title="Modifier votre profil">
  <!-- This form will be displayed as the alert main content
       Targets the alert's main content zone by default -->
  <form (ngSubmit)="updateUser(userInfo.value)" *swalPortal [formGroup]="userInfo">
    <mat-dialog-content>
      <!-- Form fields -->
      <mat-form-field>
        <input formControlName="prenom" matInput placeholder="Prenom" required type="text">
      </mat-form-field>
      <mat-form-field>
        <input formControlName="nom" matInput placeholder="Nom" required type="text">
      </mat-form-field>
      <mat-form-field>
        <input formControlName="tel" matInput placeholder="Téléphone" required type="tel">
      </mat-form-field>
      <mat-form-field>
        <input formControlName="dateNaissance" matInput placeholder="Date de naissance" required type="date">
      </mat-form-field>
      <mat-form-field>
        <mat-select formControlName="civilite" id="fcivilite" placeholder="Civilité" required>
          <mat-option value="">Civilité</mat-option>
          <mat-option value="Mr">Mr</mat-option>
          <mat-option value="Mme">Mme</mat-option>
          <mat-option value="Mlle">Mlle</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field>
        <input formControlName="adresse" matInput placeholder="Adresse" required type="text">
      </mat-form-field>
      <mat-form-field>
        <mat-select formControlName="etudeLevel" id="fniveau_etude" placeholder="Niveau d'étude" required>
          <mat-option value="">Niveau d'étude</mat-option>
          <mat-option value="BFEM">BFEM</mat-option>
          <mat-option value="BAC">BAC</mat-option>
          <mat-option value="BAC+1">BAC+1</mat-option>
          <mat-option value="BAC+2">BAC+2</mat-option>
          <mat-option value="BAC+3">BAC+3</mat-option>
          <mat-option value="BAC+4">BAC+4</mat-option>
          <mat-option value="BAC+5">BAC+5</mat-option>
          <mat-option value="+BAC+5">+BAC+5</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field>
        <mat-select formControlName="experienceLevel" id="fniveau_experience" placeholder="Niveau d'experience"
                    required>
          <mat-option value="">Niveau d'expérience</mat-option>
          <mat-option value="moins d'un an">Moins d'un an</mat-option>
          <mat-option value="1 à 3ans">1 à 3ans</mat-option>
          <mat-option value="3 à 5ans">3 à 5ans</mat-option>
          <mat-option value="5 à 10ans">5 à 10ans</mat-option>
          <mat-option value="plus de 10ans">Plus de 10ans</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field>
        <mat-select formControlName="lieu" id="flieu" placeholder="Lieu" required>
          <mat-option value="">Lieu du poste</mat-option>
          <mat-option value="Dakar">Dakar</mat-option>
          <mat-option value="Diourbel">Diourbel</mat-option>
          <mat-option value="Fatick">Fatick</mat-option>
          <mat-option value="Kaffrine">Kaffrine</mat-option>
          <mat-option value="Kaolack">Kaolack</mat-option>
          <mat-option value="Kédougou">Kédougou</mat-option>
          <mat-option value="Kolda">Kolda</mat-option>
          <mat-option value="5Louga">Louga</mat-option>
          <mat-option value="Matam">Matam</mat-option>
          <mat-option value="aint-Louis">Saint-Louis</mat-option>
          <mat-option value="Sédhiou">Sédhiou</mat-option>
          <mat-option value="Tambacounda">Tambacounda</mat-option>
          <mat-option value="Thiès">Thiès</mat-option>
          <mat-option value="Ziguinchor">Ziguinchor</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field>
        <mat-select formControlName="actualDomain" id="fdomaine_actuel" placeholder="Domaine actuel" required>
          <mat-option value="">Secteur du poste occupé</mat-option>
          <mat-option value="Bâtiment et travaux publics">Bâtiment et travaux publics</mat-option>
          <mat-option value="Immobilier">Immobilier</mat-option>
          <mat-option value="Télécommunication">Télécommunication</mat-option>
          <mat-option value="Agroalimentaire">Agroalimentaire</mat-option>
          <mat-option value="Commerce">Commerce</mat-option>
          <mat-option value="Industries Alimentaires">Industries Alimentaires</mat-option>
          <mat-option value="Banques et Etablissements Financiers">Banques et Etablissements Financiers</mat-option>
          <mat-option value="Hôtellerie">Hôtellerie</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field>
        <mat-select formControlName="searchDomain" id="fdomaine_recherche" placeholder="Domaine recherché" required>
          <mat-option value="">Secteur du poste recherché</mat-option>
          <mat-option value="Bâtiment et travaux publics">Bâtiment et travaux publics</mat-option>
          <mat-option value="Immobilier">Immobilier</mat-option>
          <mat-option value="Télécommunication">Télécommunication</mat-option>
          <mat-option value="Agroalimentaire">Agroalimentaire</mat-option>
          <mat-option value="Commerce">Commerce</mat-option>
          <mat-option value="Industries Alimentaires">Industries Alimentaires</mat-option>
          <mat-option value="Banques et Etablissements Financiers">Banques et Etablissements Financiers</mat-option>
          <mat-option value="Hôtellerie">Hôtellerie</mat-option>
        </mat-select>
      </mat-form-field>
    </mat-dialog-content>
    <mat-dialog-actions>
      <button [disabled]="userInfo.invalid" class="mat-raised-button mat-primary" type="submit">Valider</button>
    </mat-dialog-actions>
  </form>
  <ng-container *swalPortal="swalTargets.cancelButton">
    Fermer
  </ng-container>
</swal>

<swal #updatePassword [showConfirmButton]=false icon="info" title="Changer mot de passe">
  <!-- This form will be displayed as the alert main content
       Targets the alert's main content zone by default -->
  <form (ngSubmit)="sendUpdatePassword(updatePasswordForm.value)" *swalPortal [formGroup]="updatePasswordForm">
    <mat-dialog-content>
      <!-- Form fields -->
      <mat-form-field>
        <input formControlName="old_password" matInput placeholder="Ancien mot de passe" required type="password">
      </mat-form-field>
      <mat-form-field>
        <input formControlName="new_password" matInput placeholder="Nouveau de passe" required type="password">
      </mat-form-field>
      <mat-form-field>
        <input (click)="clearInput()" formControlName="confirm_new_password" matInput
               placeholder="Confirmation du nouveau mot de passe"
               required type="password">
        <span *ngIf='errorMessage' class="dark_error">{{errorMessage}}</span>
      </mat-form-field>
    </mat-dialog-content>
    <mat-dialog-actions>
      <button [disabled]="updatePasswordForm.invalid" class="mat-raised-button mat-primary" type="submit">Se connecter
      </button>
    </mat-dialog-actions>
  </form>
  <ng-container *swalPortal="swalTargets.cancelButton">
    Fermer
  </ng-container>
</swal>
